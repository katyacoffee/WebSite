{% extends "base_page.html" %}

{% block pagetitle %}
    VLF data
{% endblock %}

{% block page-title %}
{% endblock %}

{% block page-lead %}
{% endblock %}

{% load static %}

{% block content %}
    <body style='background-color: #dadfe0'>
    <div class="container px-4 py-5" id="main-contents">
        <style>
            .btn {
                float: left;
                display: inline-block;
                background: #68819a;
                font-size: 18px;
                color: white;
                font-family: 'Roboto', sans-serif;
                border: #68819a;
                border-radius: 10px;
            }

            .btn:hover {
                background: #576f88;
                color: #f8f8f8;
            }
        </style>
        <a href="/date-selection" class="btn">Back to date picker</a>
        <a href="/" class="btn" style="float: right;">To Home Page</a>
    </div>
    <span class="fs-2"></span>
    <div class="fw-bold">{% if success %}{{ date_test }}
        <style>
            .btn-previous {
                float: left;
                display: inline-block;
                background: #8e9798;
                font-size: 20px;
                color: #fcfafa;
                font-family: 'Roboto', sans-serif;
                width: 130px;
                border-radius: 5px;
                border: 1px solid #8e9798;
            }

            .btn-previous:hover {
                background: #7b8283;
                border: 1px solid #7b8283;
            }

            .btn-next {
                float: right;
                display: inline-block;
                background: #8e9798;
                font-size: 20px;
                color: #fcfafa;
                font-family: 'Roboto', sans-serif;
                border-radius: 5px;
                width: 130px;
                border: 1px solid #8e9798;
            }

            .btn-next:hover {
                background: #7b8283;
                border: 1px solid #7b8283;
            }
        </style>
        {% if no_data %}
            <span style="align-items: center;">NO DATA</span>
        {% else %}

        <form method="post" id="date_form">
            <div class="container px-4 py-5" id="main-contents">
                <input class="btn-previous" type="submit" formaction="/get-vlf-data" value="Previous day" onclick="previous()">
                <input class="btn-next" type="submit" formaction="/get-vlf-data" value="Next day" onclick="next()">
                <input type="hidden" id="button_name" name="button_name" value="">
                <input type="hidden" id="new_day" name="new_day" value="">
                <input type="hidden" id="new_month" name="new_month" value="">
                <input type="hidden" id="new_year" name="new_year" value="">
            </div>
        </form>
            <script>
                currentMonth = '{{ current_month }}';
                currentYear = '{{ current_year }}';
                currentDay = '{{ current_day }}';
                
                function next() {
                    const new_day = document.getElementById("new_day");
                    new_day.value = currentDay;
                    const new_month = document.getElementById("new_month");
                    new_month.value = currentMonth;
                    const new_year = document.getElementById("new_year");
                    new_year.value = currentYear;
                    const button_name = document.getElementById("button_name");
                    button_name.value = 'next';
                }

                function previous() {
                    const new_day = document.getElementById("new_day");
                    new_day.value = currentDay;
                    const new_month = document.getElementById("new_month");
                    new_month.value = currentMonth;
                    const new_year = document.getElementById("new_year");
                    new_year.value = currentYear;
                    const button_name = document.getElementById("button_name");
                    button_name.value = 'previous';
                }
            </script>

            <style>
                .img1 {
                    margin: auto;
                    width: 100%;
                    max-width: 900px;
                    display: block;
                    align-items: center;
                    justify-content: center;
                }
            </style>
            <picture>
                {% for image in images %}
                    <img class="img1" id="img_{{ image }}" src='{{ image }}' width=100%
                         style="display: block; align-items: center; justify-content: center; object-position: center;"/>
                {% endfor %}
            </picture>
            </a>
        {% endif %}
    {% else %}Ваш запрос завершился с ошибкой.{% endif %}</div>
    </body>
{% endblock %}
